<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        ul#episodes {
            float: right;
            margin:  0 10px;
            padding: 0;
            width: 35%;
        }

        ul#episodes > li {
            list-style-type: none;
        }

        button {
            border-radius:  7px;
            border: 0;
            background: #191414;
            color: #fff;
            padding:  10px;
            margin:  0 0 3px 0;
            width: 100%;
            cursor: pointer;
        }

        button:hover {
            background: #ef903f;
        }

        .proscons {
            display: grid;
            grid-template-columns: 1fr 1fr;
        }

        iframe#embedPlayer {
            margin: auto;
            display: block;
        }
    </style>
    
    <title>Spotify Player</title>
</head>
<body>
    <h1>Spotify iFrame API Example</h1>
    <div id="embed-iframe-zest"></div>
    <ul id="episodes">
        <li>
            <button data-spotify-id="spotify:episode:7syMFNbvkhJkNktazzqq4T">
                Season 6 Finale: 360 Eats Takes Leftovers from Food Waste to Food Truck
            </button>
        </li>
        <li>
          <button data-spotify-id="spotify:episode:1aBWstm2wpdkaxDGqqnLoV">
            &quot;Epicurious One&quot; Stephanie Love Is Disrupting the Wine Industry
          </button>
        </li>
        <li>
          <button data-spotify-id="spotify:episode:6j0dmaRahCJqObt03INECv">
            Awww...Shuks! &quot;OysterMom&quot; Deborah Keller on the Importance of Sustainable Aquaculture
          </button>
        </li>
        <li>
          <button data-spotify-id="spotify:episode:0YJwnipiKHyagQgrnbxPyU">
            Dr. Fred Opie on the &quot;Fascinating&quot; African Roots of Florida Foods
          </button>
        </li>
    </ul>
    <div class="proscons">
        <div class="pros">
            <h2>Advantages</h2>
            <ul>
                <li>Visually appealing</li>
                <li>Easy to update code manually</li>
                <li>Great for highlighting one (or a few) specific episodes</li>
                <li>Can modify the look of the episode switcher to the right of the player</li>
            </ul>
        </div>
        <div class="cons">
            <h2>Disadvantages</h2>
            <ul>
                <li>Some coding knowledge required to change look 'n feel of episode switcher</li>
                <li>Few API options for player customization</li>
                <li>Spotify can make visual changes and/or API changes at anytime</li>
            </ul>
        </div>  
    </div>
    <hr />
    <h1>Apple Podcast Player Example</h1>
    <!-- Apple Player Embed Information
    https://tools.applemediaservices.com/apple-podcasts -->
    <iframe 
        id="embedPlayer" 
        src="https://embed.podcasts.apple.com/us/podcast/the-zest/id1458162352?itsct=podcast_box_player&amp;itscg=30200&amp;ls=1&amp;theme=auto" 
        height="450px" 
        frameborder="0" 
        sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation" 
        allow="autoplay *; encrypted-media *; clipboard-write" 
        style="width: 100%; max-width: 660px; overflow: hidden; border-radius: 10px; transform: translateZ(0px); animation: 2s ease 0s 6 normal none running loading-indicator; background-color: rgb(228, 228, 228);">
    </iframe>
    <div class="proscons">
        <div class="pros">
            <h2>Advantages</h2>
            <ul>
                <li>Visually appealing</li>
                <li>Easy to add the embed code</li>
                <li>Latest episodes always appear; no manual update</li>
            </ul>
        </div>
        <div class="cons">
            <h2>Disadvantages</h2>
            <ul>
                <li>Very few options for player customization</li>
                <li>Apple can make visual changes at anytime</li>
            </ul>
        </div>  
    </div>
    <script src="https://open.spotify.com/embed-podcast/iframe-api/v1" async></script>
    <script>
        /* Spotify Podcast IDs Reference
        Florida Matters = 29odNMVw3byywQsA0YOZwi
        Zest = 0QoL0KwFGMALcoBdzFAbUE
        Arts Axis = 03ZiveeLn3NrsHsS4BFrYX
        */

        window.onSpotifyIframeApiReady = (IFrameAPI) => {
            let element = document.getElementById('embed-iframe-zest')
            
            let callback = (EmbedController) => {
                document.querySelectorAll('ul#episodes > li > button').forEach(episode => {
                    episode.addEventListener('click', () => {
                        EmbedController.loadUri(episode.dataset.spotifyId)
                        EmbedController.togglePlay()
                    })
                })
            }
            fetch('https://api-dev.wusf.digital/spotify?id=03ZiveeLn3NrsHsS4BFrYX')
            .then(response => response.json())
            .then(uri => {
                // Spotify iFrame API Reference
                // https://developer.spotify.com/documentation/embeds/references/iframe-api/
                let options = {
                    uri: uri[0],
                    width: '60%',
                    height: '200'
                }
                IFrameAPI.createController(element, options, callback)  
            })
            .catch(err => console.log(err))
        }
    </script>
</body>
</html>