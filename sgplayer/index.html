<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" id="sgplayerembed" src="https://player.streamguys.com/wusf/sgplayer/embed.min.js?v=3.2.7"></script>
    <title>StreamGuys Test Player</title>
</head>
<body>
    <div class="sgplayer-embed" style="height:700px;"></div>
    <script>
        /* 
        Try to access a new instance of SGPlayer right away
        There is an options object I'm leaving out for the moment
        */
        const newSGInstance = new SGPlayer()
        console.log(newSGInstance)

        /* 
        Keep checking every 2 seconds until I get access
        to the SGPlayer instance.
        */
        let sgApiAvailable = false

        function isSgPlayerAvailable() {
            return typeof(window._sgplayer) === 'undefined' ? false : true 
        }

        const check = setInterval(() => {
            isSgPlayerAvailable() === false ? isSgPlayerAvailable() : run()
        }, 2000)

        function run() {
            sgApiAvailable = true
            clearInterval(check)
            console.log('Access to SGPlayer Instance')

        }
    </script>
</body>
</html>